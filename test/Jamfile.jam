# Copyright (c) 2006, 2007 Julio M. Merino Vidal
# Copyright (c) 2008 Ilya Sokolov, Boris Schaeling
# Copyright (c) 2009 Boris Schaeling
# Copyright (c) 2010 Felipe Tanus, Boris Schaeling
# Copyright (c) 2011, 2012 Jeff Flinn, Boris Schaeling
#
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

project : requirements
   <include>../include
   <include>../../winapi/include
  
 # <source>/boost//headers
 # <source>/boost//system
  <toolset>msvc:<define>_SCL_SECURE_NO_WARNINGS
  <target-os>windows:<define>WIN32_LEAN_AND_MEAN
  <target-os>linux:<linkflags>-lpthread
  <toolset>gcc:<cxxflags>-std=gnu++1y
;

searched-lib shell32 ;

import testing ;

#lib system : : <name>boost_filesystem-clang37-mt-1_60.lib <search>F:/boost-git/lib ;


lib program_options : : <file>F:/boost-git/lib64/libboost_program_options-mgw-mt-1_60.a ;
lib filesystem 	    : : <file>F:/boost-git/lib64/libboost_filesystem-mgw-mt-1_60.a      ;
lib iostreams 		: : <file>F:/boost-git/lib64/libboost_iostreams-mgw-mt-1_60.a       ;
lib system   		: : <file>F:/boost-git/lib64/libboost_system-mgw-mt-1_60.a          ;

exe sparring_partner : sparring_partner.cpp  :
	<linkflags>-LF:/boost-git/lib
	<toolset>clang:<library>F:/boost-git/lib/libboost_program_options-clang37-mt-1_60.lib
	<toolset>clang:<library>F:/boost-git/lib/libboost_filesystem-clang37-mt-1_60.lib
	<toolset>clang:<library>F:/boost-git/lib/libboost_iostreams-clang37-mt-1_60.lib
	<toolset>clang:<library>F:/boost-git/lib/libboost_system-clang37-mt-1_60.lib
	<toolset>clang:<linkflags>-lstdc++
	<toolset>gcc:<library>F:/boost-git/lib64/libboost_program_options-mgw-mt-1_60.a
	<toolset>gcc:<library>F:/boost-git/lib64/libboost_filesystem-mgw-mt-1_60.a
	<toolset>gcc:<library>F:/boost-git/lib64/libboost_iostreams-mgw-mt-1_60.a
	<toolset>gcc:<library>F:/boost-git/lib64/libboost_system-mgw-mt-1_60.a
	<warnings>off
	;

test-suite ts :
	  [ run pipe.cpp : : :	
	  	<toolset>clang:<library>F:/boost-git/lib/libboost_iostreams-clang37-mt-1_60.lib
	  	<toolset>gcc:<library>F:/boost-git/lib64/libboost_iostreams-mgw-mt-1_60.a 	  	
	  	 ]
      [ run bind_stderr.cpp iostreams : : sparring_partner : <linkflags>-lws2_32  												]
#     [ run bind_stdin.cpp iostreams system : : sparring_partner                                                                ]
#     [ run bind_stdin_stdout.cpp iostreams system : : sparring_partner                                                         ]
      [ run bind_stdout.cpp iostreams system : : sparring_partner  : <linkflags>-lws2_32 										]
      [ run bind_stdout_stderr.cpp iostreams system : : sparring_partner : <linkflags>-lws2_32                                  ]
#     [ run close_stderr.cpp iostreams system : : sparring_partner                                                              ]
#     [ run close_stdin.cpp iostreams  system : : sparring_partner                                                              ]
#     [ run close_stdout.cpp iostreams system : : sparring_partner                                                              ]
#     [ run exit_code.cpp iostreams program_options system : : sparring_partner                                                 ]
#     [ run extensions.cpp system : : sparring_partner                                                                          ]
#     [ run inherit_env.cpp iostreams program_options system : : sparring_partner                                               ]
#     [ run posix_specific.cpp iostreams system : : sparring_partner : <build>no <target-os>linux:<build>yes                    ]
      [ run run_exe.cpp  : : sparring_partner                                                                             ]
      [ run run_exe_path.cpp : : sparring_partner                                                             ]
#     [ run search_path.cpp filesystem system : : : <target-os>windows:<source>shell32                                          ]
#     [ run search_path_wstring.cpp filesystem shell32 system : : : <build>no <target-os>windows:<build>yes                     ]
#     [ run set_args.cpp iostreams system : : sparring_partner                                                                  ]
#     [ run set_args_wstring.cpp iostreams filesystem system : : sparring_partner : <build>no <target-os>windows:<build>yes     ]
#     [ run set_cmd_line.cpp iostreams system : : sparring_partner                                                              ]
#     [ run set_cmd_line_wstring.cpp iostreams filesystem system : : sparring_partner : <build>no <target-os>windows:<build>yes ]
#     [ run set_env.cpp iostreams system : : sparring_partner                                                                   ]
#     [ run set_env_wstring.cpp iostreams filesystem system : : sparring_partner : <build>no <target-os>windows:<build>yes      ]
#     [ run set_on_error.cpp system : : sparring_partner                                                                        ]
#     [ run shell_path.cpp filesystem system                                                                                    ]
#     [ run shell_path_wstring.cpp filesystem system : : : <build>no <target-os>windows:<build>yes                              ]
#     [ run show_window.cpp iostreams system : : sparring_partner  : <build>no <target-os>windows:<build>yes                    ]
#     [ run start_in_dir.cpp iostreams filesystem system : : sparring_partner                                                   ]
#     [ run start_in_dir_wstring.cpp iostreams filesystem system : : sparring_partner : <build>no <target-os>windows:<build>yes ]
      [ run terminate.cpp system : : sparring_partner : <linkflags>-lws2_32                                                     ]
#     [ run throw_on_error.cpp system : : sparring_partner                                                                      ]
      [ run wait.cpp system : : sparring_partner : <linkflags>-lws2_32                                                          ]
#     [ run windows_specific.cpp iostreams system : : sparring_partner : <build>no <target-os>windows:<build>yes                ]
	;